const applicantsData = {
  "120397": {
    "personal": { "name": "Rohan Gupta", "dob": "21/04/1986", "gender": "Male" },
    "graphImage": "graphs/riskon_animation_applicant_120397.gif",
    "geminiSummary": "The applicant, Rohan Gupta, is assessed as 'Low' risk. Although the applicant's full history shows some volatility, including a past spike in risk, their predicted probability of default has stabilized in recent months. The latest data points indicate a consistent and low-risk profile, making them a suitable candidate for credit.",
    "history": [
      {"Risk_Category":"Low", "Month_Offset": -1, "Predicted_Prob_Default": 0.22088797155978898},
      {"Risk_Category":"Low", "Month_Offset": -2, "Predicted_Prob_Default": 0.1999051538836631},
      {"Risk_Category":"Low", "Month_Offset": -3, "Predicted_Prob_Default": 0.20089186185663524}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9876543210",
      "email": "rohan.gupta@email.com",
      "address": {
        "street": "42 Linking Road, Bandra West",
        "city": "Mumbai",
        "state": "Maharashtra",
        "pincode": "400050",
        "coordinates": { "lat": 19.0596, "lng": 72.8295 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "Senior Software Engineer",
        "company": "Infosys Technologies Ltd",
        "industry": "Information Technology",
        "duration": "4 years 8 months",
        "salary": 1450000,
        "employmentType": "Full-time"
      },
      "history": [
        {"title": "Software Engineer", "company": "TCS", "duration": "2 years", "salary": 850000},
        {"title": "Junior Developer", "company": "Wipro", "duration": "1.5 years", "salary": 450000}
      ],
      "stabilityScore": 0.92
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 18000,
        "entertainment": 12000,
        "utilities": 8000,
        "transportation": 15000,
        "healthcare": 5000,
        "shopping": 14000,
        "dining": 10000,
        "savings": 25000,
        "other": 8000
      },
      "trends": [
        {"month": "Nov 2024", "total": 115000, "change": "+2.1%"},
        {"month": "Oct 2024", "total": 112500, "change": "-1.5%"},
        {"month": "Sep 2024", "total": 114200, "change": "+0.8%"}
      ],
      "averageMonthly": 115000
    },
    "investments": {
      "portfolio": {
        "stocks": 850000,
        "mutualFunds": 650000,
        "bonds": 200000,
        "fixedDeposits": 400000,
        "ppf": 180000,
        "other": 120000
      },
      "riskProfile": "Moderate",
      "totalValue": 2400000,
      "monthlyInvestment": 45000
    },
    "location": {
      "regionalRisk": "Low",
      "economicIndicators": {
        "averageIncome": 1200000,
        "unemploymentRate": 2.8,
        "costOfLiving": "High",
        "creditScore": "Excellent"
      }
    }
  },
  "205743": {
    "personal": { "name": "Isha Reddy", "dob": "19/11/1991", "gender": "Female" },
    "graphImage": "graphs/riskon_animation_applicant_205743.gif",
    "geminiSummary": "This applicant, Isha Reddy, is categorized as 'Medium' risk. Her profile shows a notable increase in default probability in the months immediately preceding the application, shifting from low to medium risk. While the overall risk is moderate, this recent upward trend warrants a cautious evaluation.",
    "history": [
      {"Risk_Category":"Medium", "Month_Offset": -1, "Predicted_Prob_Default": 0.32959939373652714},
      {"Risk_Category":"Medium", "Month_Offset": -2, "Predicted_Prob_Default": 0.3003194355248934},
      {"Risk_Category":"Low", "Month_Offset": -3, "Predicted_Prob_Default": 0.15037180675585593}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9123456789",
      "email": "isha.reddy@email.com",
      "address": {
        "street": "15 Jubilee Hills, Road No. 36",
        "city": "Hyderabad",
        "state": "Telangana",
        "pincode": "500033",
        "coordinates": { "lat": 17.4239, "lng": 78.4738 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "Marketing Manager",
        "company": "Amazon India",
        "industry": "E-commerce",
        "duration": "2 years 4 months",
        "salary": 1100000,
        "employmentType": "Full-time"
      },
      "history": [
        {"title": "Assistant Marketing Manager", "company": "Flipkart", "duration": "1.8 years", "salary": 750000},
        {"title": "Marketing Executive", "company": "Myntra", "duration": "1.2 years", "salary": 480000}
      ],
      "stabilityScore": 0.78
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 15000,
        "entertainment": 18000,
        "utilities": 7000,
        "transportation": 12000,
        "healthcare": 8000,
        "shopping": 22000,
        "dining": 14000,
        "savings": 15000,
        "other": 12000
      },
      "trends": [
        {"month": "Nov 2024", "total": 123000, "change": "+8.2%"},
        {"month": "Oct 2024", "total": 113700, "change": "+5.1%"},
        {"month": "Sep 2024", "total": 108200, "change": "+3.8%"}
      ],
      "averageMonthly": 123000
    },
    "investments": {
      "portfolio": {
        "stocks": 320000,
        "mutualFunds": 280000,
        "bonds": 80000,
        "fixedDeposits": 150000,
        "ppf": 95000,
        "other": 45000
      },
      "riskProfile": "Moderate-Aggressive",
      "totalValue": 970000,
      "monthlyInvestment": 28000
    },
    "location": {
      "regionalRisk": "Medium",
      "economicIndicators": {
        "averageIncome": 950000,
        "unemploymentRate": 3.5,
        "costOfLiving": "Medium-High",
        "creditScore": "Good"
      }
    }
  },
  "229335": {
    "personal": { "name": "Amit Kumar", "dob": "30/07/1978", "gender": "Male" },
    "graphImage": "graphs/riskon_animation_applicant_229335.gif",
    "geminiSummary": "Amit Kumar is assessed as a 'Medium' risk candidate. His historical data shows a period of very high risk (above 0.9) approximately seven years prior to application. However, his risk profile has since stabilized, remaining consistently in the medium range in the most recent period. The past volatility should be noted, but the current assessment is moderate.",
    "history": [
      {"Risk_Category":"Medium", "Month_Offset": -1, "Predicted_Prob_Default": 0.4679934265026425},
      {"Risk_Category":"Medium", "Month_Offset": -2, "Predicted_Prob_Default": 0.4478445165905777},
      {"Risk_Category":"Medium", "Month_Offset": -3, "Predicted_Prob_Default": 0.5346760067895617}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9988776655",
      "email": "amit.kumar@email.com",
      "address": {
        "street": "C-204 Sector 62, Noida",
        "city": "Noida",
        "state": "Uttar Pradesh",
        "pincode": "201309",
        "coordinates": { "lat": 28.6139, "lng": 77.2090 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "Operations Manager",
        "company": "Maruti Suzuki India Ltd",
        "industry": "Automotive",
        "duration": "6 years 2 months",
        "salary": 950000,
        "employmentType": "Full-time"
      },
      "history": [
        {"title": "Assistant Manager", "company": "Tata Motors", "duration": "3.5 years", "salary": 650000},
        {"title": "Executive", "company": "Mahindra & Mahindra", "duration": "2.8 years", "salary": 420000}
      ],
      "stabilityScore": 0.85
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 20000,
        "entertainment": 8000,
        "utilities": 12000,
        "transportation": 18000,
        "healthcare": 15000,
        "shopping": 10000,
        "dining": 8000,
        "savings": 12000,
        "other": 15000
      },
      "trends": [
        {"month": "Nov 2024", "total": 118000, "change": "+1.2%"},
        {"month": "Oct 2024", "total": 116600, "change": "-0.8%"},
        {"month": "Sep 2024", "total": 117500, "change": "+2.1%"}
      ],
      "averageMonthly": 118000
    },
    "investments": {
      "portfolio": {
        "stocks": 180000,
        "mutualFunds": 420000,
        "bonds": 150000,
        "fixedDeposits": 300000,
        "ppf": 220000,
        "other": 80000
      },
      "riskProfile": "Conservative",
      "totalValue": 1350000,
      "monthlyInvestment": 22000
    },
    "location": {
      "regionalRisk": "Medium",
      "economicIndicators": {
        "averageIncome": 850000,
        "unemploymentRate": 4.2,
        "costOfLiving": "Medium",
        "creditScore": "Fair"
      }
    }
  },
  "234968": {
    "personal": { "name": "Sneha Patel", "dob": "02/02/1995", "gender": "Female" },
    "graphImage": "graphs/riskon_animation_applicant_234968.gif",
    "geminiSummary": "The applicant, Sneha Patel, has a dynamic risk profile that has recently improved, moving from 'Medium' to 'Low' risk. While her history shows periods of significantly higher risk (peaking above 0.8), the most recent trend is positive and shows decreasing default probability. This recent improvement suggests a stronger current financial position.",
    "history": [
      {"Risk_Category":"Low", "Month_Offset": -4, "Predicted_Prob_Default": 0.2306256274167947},
      {"Risk_Category":"Medium", "Month_Offset": -5, "Predicted_Prob_Default": 0.33770456553033706},
      {"Risk_Category":"Medium", "Month_Offset": -6, "Predicted_Prob_Default": 0.4878790572776031}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9876512345",
      "email": "sneha.patel@email.com",
      "address": {
        "street": "23 Satellite Road, Ahmedabad",
        "city": "Ahmedabad",
        "state": "Gujarat",
        "pincode": "380015",
        "coordinates": { "lat": 23.0225, "lng": 72.5714 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "Financial Analyst",
        "company": "HDFC Bank",
        "industry": "Banking & Finance",
        "duration": "3 years 1 month",
        "salary": 850000,
        "employmentType": "Full-time"
      },
      "history": [
        {"title": "Junior Analyst", "company": "ICICI Bank", "duration": "1.5 years", "salary": 520000},
        {"title": "Trainee", "company": "SBI", "duration": "1 year", "salary": 350000}
      ],
      "stabilityScore": 0.88
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 12000,
        "entertainment": 15000,
        "utilities": 6000,
        "transportation": 10000,
        "healthcare": 4000,
        "shopping": 18000,
        "dining": 12000,
        "savings": 20000,
        "other": 8000
      },
      "trends": [
        {"month": "Nov 2024", "total": 105000, "change": "-3.2%"},
        {"month": "Oct 2024", "total": 108500, "change": "-1.8%"},
        {"month": "Sep 2024", "total": 110500, "change": "+2.5%"}
      ],
      "averageMonthly": 105000
    },
    "investments": {
      "portfolio": {
        "stocks": 450000,
        "mutualFunds": 380000,
        "bonds": 120000,
        "fixedDeposits": 200000,
        "ppf": 85000,
        "other": 65000
      },
      "riskProfile": "Moderate-Aggressive",
      "totalValue": 1300000,
      "monthlyInvestment": 35000
    },
    "location": {
      "regionalRisk": "Low",
      "economicIndicators": {
        "averageIncome": 750000,
        "unemploymentRate": 2.9,
        "costOfLiving": "Medium",
        "creditScore": "Very Good"
      }
    }
  },
  "257537": {
    "personal": { "name": "Varun Singh", "dob": "15/09/1989", "gender": "Male" },
    "graphImage": "graphs/riskon_animation_applicant_257537.gif",
    "geminiSummary": "Varun Singh's profile is categorized as 'High' risk. The data shows his probability of default consistently bordering between medium and high, culminating in a high-risk assessment at the time of application (Month 0). This pattern suggests a tangible risk of financial unpredictability, warranting significant caution.",
    "history": [
      {"Risk_Category":"High", "Month_Offset": 0, "Predicted_Prob_Default": 0.7196559119171034},
      {"Risk_Category":"Medium", "Month_Offset": -1, "Predicted_Prob_Default": 0.6668090497944398},
      {"Risk_Category":"High", "Month_Offset": -2, "Predicted_Prob_Default": 0.7196559119171034}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9654321098",
      "email": "varun.singh@email.com",
      "address": {
        "street": "45 MG Road, Koramangala",
        "city": "Bangalore",
        "state": "Karnataka",
        "pincode": "560034",
        "coordinates": { "lat": 12.9352, "lng": 77.6245 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "Sales Executive",
        "company": "Byju's",
        "industry": "EdTech",
        "duration": "1 year 3 months",
        "salary": 650000,
        "employmentType": "Full-time"
      },
      "history": [
        {"title": "Business Development", "company": "Unacademy", "duration": "8 months", "salary": 480000},
        {"title": "Sales Associate", "company": "Zomato", "duration": "1.2 years", "salary": 420000},
        {"title": "Marketing Executive", "company": "Swiggy", "duration": "6 months", "salary": 350000}
      ],
      "stabilityScore": 0.45
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 8000,
        "entertainment": 25000,
        "utilities": 5000,
        "transportation": 15000,
        "healthcare": 3000,
        "shopping": 12000,
        "dining": 18000,
        "savings": 5000,
        "other": 20000
      },
      "trends": [
        {"month": "Nov 2024", "total": 111000, "change": "+15.2%"},
        {"month": "Oct 2024", "total": 96400, "change": "+8.7%"},
        {"month": "Sep 2024", "total": 88700, "change": "+12.3%"}
      ],
      "averageMonthly": 111000
    },
    "investments": {
      "portfolio": {
        "stocks": 85000,
        "mutualFunds": 120000,
        "bonds": 25000,
        "fixedDeposits": 80000,
        "ppf": 35000,
        "other": 15000
      },
      "riskProfile": "Aggressive",
      "totalValue": 360000,
      "monthlyInvestment": 8000
    },
    "location": {
      "regionalRisk": "Medium-High",
      "economicIndicators": {
        "averageIncome": 980000,
        "unemploymentRate": 4.8,
        "costOfLiving": "High",
        "creditScore": "Fair"
      }
    }
  },
  "338391": {
    "personal": { "name": "Pooja Sharma", "dob": "25/12/1993", "gender": "Female" },
    "graphImage": "graphs/riskon_animation_applicant_338391.gif",
    "geminiSummary": "Pooja Sharma is a 'High' risk applicant. Her data shows a volatile history, with the predicted default probability increasing significantly in the most recent period to over 0.75. This sharp, recent increase into the high-risk category suggests potential financial instability and makes this applicant a high-risk candidate for lending.",
    "history": [
      {"Risk_Category":"High", "Month_Offset": -4, "Predicted_Prob_Default": 0.7672491086753923},
      {"Risk_Category":"Medium", "Month_Offset": -5, "Predicted_Prob_Default": 0.49638602141024396},
      {"Risk_Category":"Medium", "Month_Offset": -6, "Predicted_Prob_Default": 0.6533933702833217}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9321654987",
      "email": "pooja.sharma@email.com",
      "address": {
        "street": "12 Civil Lines, Near Mall Road",
        "city": "Jaipur",
        "state": "Rajasthan",
        "pincode": "302006",
        "coordinates": { "lat": 26.9124, "lng": 75.7873 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "Freelance Graphic Designer",
        "company": "Self-Employed",
        "industry": "Creative Services",
        "duration": "2 years 6 months",
        "salary": 480000,
        "employmentType": "Freelance"
      },
      "history": [
        {"title": "Junior Designer", "company": "Design Studio", "duration": "1 year", "salary": 320000},
        {"title": "Intern", "company": "Ad Agency", "duration": "6 months", "salary": 180000}
      ],
      "stabilityScore": 0.35
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 10000,
        "entertainment": 15000,
        "utilities": 4000,
        "transportation": 8000,
        "healthcare": 6000,
        "shopping": 20000,
        "dining": 12000,
        "savings": 2000,
        "other": 18000
      },
      "trends": [
        {"month": "Nov 2024", "total": 95000, "change": "+22.5%"},
        {"month": "Oct 2024", "total": 77500, "change": "-8.2%"},
        {"month": "Sep 2024", "total": 84400, "change": "+18.7%"}
      ],
      "averageMonthly": 95000
    },
    "investments": {
      "portfolio": {
        "stocks": 45000,
        "mutualFunds": 65000,
        "bonds": 15000,
        "fixedDeposits": 35000,
        "ppf": 20000,
        "other": 10000
      },
      "riskProfile": "High Risk",
      "totalValue": 190000,
      "monthlyInvestment": 3000
    },
    "location": {
      "regionalRisk": "Medium",
      "economicIndicators": {
        "averageIncome": 520000,
        "unemploymentRate": 5.2,
        "costOfLiving": "Low-Medium",
        "creditScore": "Poor"
      }
    }
  },
  "348704": {
    "personal": { "name": "Karan Malhotra", "dob": "11/06/1982", "gender": "Male" },
    "graphImage": "graphs/riskon_animation_applicant_348704.gif",
    "geminiSummary": "Karan Malhotra is assessed as a 'High' risk candidate. His profile demonstrates extreme volatility, with the probability of default soaring to over 0.9 just before the application date. Although the final data point at Month 0 shows a drop to a medium level, the preceding period of exceptionally high risk indicates significant instability and a high likelihood of future default.",
    "history": [
      {"Risk_Category":"Medium", "Month_Offset": 0, "Predicted_Prob_Default": 0.6817765112021317},
      {"Risk_Category":"High", "Month_Offset": -1, "Predicted_Prob_Default": 0.9010377002921635},
      {"Risk_Category":"High", "Month_Offset": -2, "Predicted_Prob_Default": 0.9107532774447207}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1560250097-0b93528c311a?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9876098765",
      "email": "karan.malhotra@email.com",
      "address": {
        "street": "78 Connaught Place, Central Delhi",
        "city": "New Delhi",
        "state": "Delhi",
        "pincode": "110001",
        "coordinates": { "lat": 28.6315, "lng": 77.2167 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "Restaurant Owner",
        "company": "Malhotra's Dhaba",
        "industry": "Food & Beverage",
        "duration": "3 years 8 months",
        "salary": 720000,
        "employmentType": "Self-Employed"
      },
      "history": [
        {"title": "Manager", "company": "Hotel Taj", "duration": "2 years", "salary": 580000},
        {"title": "Assistant Manager", "company": "ITC Hotels", "duration": "3 years", "salary": 450000}
      ],
      "stabilityScore": 0.52
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 25000,
        "entertainment": 20000,
        "utilities": 15000,
        "transportation": 12000,
        "healthcare": 8000,
        "shopping": 15000,
        "dining": 10000,
        "savings": 8000,
        "other": 22000
      },
      "trends": [
        {"month": "Nov 2024", "total": 135000, "change": "+28.5%"},
        {"month": "Oct 2024", "total": 105000, "change": "-12.8%"},
        {"month": "Sep 2024", "total": 120400, "change": "+35.2%"}
      ],
      "averageMonthly": 135000
    },
    "investments": {
      "portfolio": {
        "stocks": 150000,
        "mutualFunds": 80000,
        "bonds": 40000,
        "fixedDeposits": 120000,
        "ppf": 60000,
        "other": 50000
      },
      "riskProfile": "High Risk",
      "totalValue": 500000,
      "monthlyInvestment": 12000
    },
    "location": {
      "regionalRisk": "High",
      "economicIndicators": {
        "averageIncome": 1100000,
        "unemploymentRate": 6.1,
        "costOfLiving": "Very High",
        "creditScore": "Poor"
      }
    }
  },
  "419683": {
    "personal": { "name": "Diya Joshi", "dob": "08/03/1990", "gender": "Female" },
    "graphImage": "graphs/riskon_animation_applicant_419683.gif",
    "geminiSummary": "The applicant, Diya Joshi, has a 'Medium' risk profile. Her risk trajectory shows a steady increase in the months leading up to the application, moving from low into the medium-risk category. This recent upward trend, combined with a generally volatile history, suggests a degree of financial inconsistency that requires a cautious lending approach.",
    "history": [
      {"Risk_Category":"Medium", "Month_Offset": -1, "Predicted_Prob_Default": 0.6705335390975286},
      {"Risk_Category":"Medium", "Month_Offset": -2, "Predicted_Prob_Default": 0.44091176664515963},
      {"Risk_Category":"Low", "Month_Offset": -3, "Predicted_Prob_Default": 0.2969134019800969}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9123987654",
      "email": "diya.joshi@email.com",
      "address": {
        "street": "56 FC Road, Shivajinagar",
        "city": "Pune",
        "state": "Maharashtra",
        "pincode": "411005",
        "coordinates": { "lat": 18.5204, "lng": 73.8567 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "HR Manager",
        "company": "Cognizant Technology Solutions",
        "industry": "Information Technology",
        "duration": "2 years 9 months",
        "salary": 980000,
        "employmentType": "Full-time"
      },
      "history": [
        {"title": "HR Executive", "company": "Accenture", "duration": "2.2 years", "salary": 650000},
        {"title": "Recruiter", "company": "Capgemini", "duration": "1.5 years", "salary": 420000}
      ],
      "stabilityScore": 0.72
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 14000,
        "entertainment": 16000,
        "utilities": 8000,
        "transportation": 11000,
        "healthcare": 7000,
        "shopping": 19000,
        "dining": 13000,
        "savings": 18000,
        "other": 12000
      },
      "trends": [
        {"month": "Nov 2024", "total": 118000, "change": "+6.8%"},
        {"month": "Oct 2024", "total": 110500, "change": "+3.2%"},
        {"month": "Sep 2024", "total": 107100, "change": "+1.8%"}
      ],
      "averageMonthly": 118000
    },
    "investments": {
      "portfolio": {
        "stocks": 280000,
        "mutualFunds": 350000,
        "bonds": 90000,
        "fixedDeposits": 180000,
        "ppf": 120000,
        "other": 80000
      },
      "riskProfile": "Moderate",
      "totalValue": 1100000,
      "monthlyInvestment": 25000
    },
    "location": {
      "regionalRisk": "Medium",
      "economicIndicators": {
        "averageIncome": 890000,
        "unemploymentRate": 3.8,
        "costOfLiving": "Medium-High",
        "creditScore": "Good"
      }
    }
  },
  "440013": {
    "personal": { "name": "Sameer Khan", "dob": "14/10/1987", "gender": "Male" },
    "graphImage": "graphs/riskon_animation_applicant_440013.gif",
    "geminiSummary": "Sameer Khan is rated as a 'High' risk applicant. The data indicates a high probability of default in the two months immediately preceding the application, reaching over 0.72. While the risk level drops to medium at the application date (Month 0), this recent period of high risk is a significant concern and points to considerable financial instability.",
    "history": [
      {"Risk_Category":"Medium", "Month_Offset": 0, "Predicted_Prob_Default": 0.31734054653536914},
      {"Risk_Category":"High", "Month_Offset": -1, "Predicted_Prob_Default": 0.7247436699523805},
      {"Risk_Category":"High", "Month_Offset": -2, "Predicted_Prob_Default": 0.7247436699523805}
    ],
    "profile": {
      "avatar": "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=150&h=150&fit=crop&crop=face",
      "phone": "+91-9876543098",
      "email": "sameer.khan@email.com",
      "address": {
        "street": "89 Park Street, Kolkata",
        "city": "Kolkata",
        "state": "West Bengal",
        "pincode": "700016",
        "coordinates": { "lat": 22.5726, "lng": 88.3639 }
      }
    },
    "employment": {
      "currentJob": {
        "title": "Real Estate Agent",
        "company": "Khan Properties",
        "industry": "Real Estate",
        "duration": "1 year 8 months",
        "salary": 580000,
        "employmentType": "Commission-based"
      },
      "history": [
        {"title": "Sales Manager", "company": "Property Dealers", "duration": "1.5 years", "salary": 520000},
        {"title": "Marketing Executive", "company": "Builder Group", "duration": "2 years", "salary": 380000}
      ],
      "stabilityScore": 0.38
    },
    "spending": {
      "monthlyCategories": {
        "groceries": 12000,
        "entertainment": 22000,
        "utilities": 6000,
        "transportation": 14000,
        "healthcare": 5000,
        "shopping": 16000,
        "dining": 15000,
        "savings": 3000,
        "other": 25000
      },
      "trends": [
        {"month": "Nov 2024", "total": 118000, "change": "+32.8%"},
        {"month": "Oct 2024", "total": 88900, "change": "-15.2%"},
        {"month": "Sep 2024", "total": 104800, "change": "+28.5%"}
      ],
      "averageMonthly": 118000
    },
    "investments": {
      "portfolio": {
        "stocks": 95000,
        "mutualFunds": 140000,
        "bonds": 30000,
        "fixedDeposits": 85000,
        "ppf": 45000,
        "other": 25000
      },
      "riskProfile": "High Risk",
      "totalValue": 420000,
      "monthlyInvestment": 6000
    },
    "location": {
      "regionalRisk": "Medium-High",
      "economicIndicators": {
        "averageIncome": 680000,
        "unemploymentRate": 5.5,
        "costOfLiving": "Medium",
        "creditScore": "Fair"
      }
    }
  }
};

// Data validation and fallback mechanisms
const DataValidator = {
  // Default values for missing data
  defaults: {
    profile: {
      avatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",
      phone: "Not Available",
      email: "Not Available",
      address: {
        street: "Address Not Available",
        city: "Unknown",
        state: "Unknown",
        pincode: "000000",
        coordinates: { lat: 0, lng: 0 }
      }
    },
    employment: {
      currentJob: {
        title: "Not Available",
        company: "Not Available",
        industry: "Not Available",
        duration: "Not Available",
        salary: 0,
        employmentType: "Not Available"
      },
      history: [],
      stabilityScore: 0
    },
    spending: {
      monthlyCategories: {
        groceries: 0,
        entertainment: 0,
        utilities: 0,
        transportation: 0,
        healthcare: 0,
        shopping: 0,
        dining: 0,
        savings: 0,
        other: 0
      },
      trends: [],
      averageMonthly: 0
    },
    investments: {
      portfolio: {
        stocks: 0,
        mutualFunds: 0,
        bonds: 0,
        fixedDeposits: 0,
        ppf: 0,
        other: 0
      },
      riskProfile: "Not Available",
      totalValue: 0,
      monthlyInvestment: 0
    },
    location: {
      regionalRisk: "Unknown",
      economicIndicators: {
        averageIncome: 0,
        unemploymentRate: 0,
        costOfLiving: "Unknown",
        creditScore: "Unknown"
      }
    }
  },

  // Validate and fill missing data for an applicant
  validateApplicant: function(applicant) {
    if (!applicant) return null;

    // Ensure required legacy fields exist
    if (!applicant.personal || !applicant.graphImage || !applicant.geminiSummary || !applicant.history) {
      console.warn('Missing required legacy fields for applicant');
      return null;
    }

    // Fill missing enhanced data with defaults
    applicant.profile = this.mergeWithDefaults(applicant.profile, this.defaults.profile);
    applicant.employment = this.mergeWithDefaults(applicant.employment, this.defaults.employment);
    applicant.spending = this.mergeWithDefaults(applicant.spending, this.defaults.spending);
    applicant.investments = this.mergeWithDefaults(applicant.investments, this.defaults.investments);
    applicant.location = this.mergeWithDefaults(applicant.location, this.defaults.location);

    return applicant;
  },

  // Deep merge object with defaults
  mergeWithDefaults: function(obj, defaults) {
    if (!obj) return JSON.parse(JSON.stringify(defaults));
    
    const result = JSON.parse(JSON.stringify(defaults));
    
    function deepMerge(target, source) {
      for (const key in source) {
        if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {
          if (!target[key]) target[key] = {};
          deepMerge(target[key], source[key]);
        } else {
          target[key] = source[key];
        }
      }
    }
    
    deepMerge(result, obj);
    return result;
  },

  // Get validated applicant data
  getApplicant: function(applicantId) {
    const applicant = applicantsData[applicantId];
    return this.validateApplicant(applicant);
  },

  // Get all validated applicants
  getAllApplicants: function() {
    const validated = {};
    for (const id in applicantsData) {
      const validatedApplicant = this.validateApplicant(applicantsData[id]);
      if (validatedApplicant) {
        validated[id] = validatedApplicant;
      }
    }
    return validated;
  },

  // Check if enhanced data is available for an applicant
  hasEnhancedData: function(applicant) {
    return applicant && 
           applicant.profile && 
           applicant.employment && 
           applicant.spending && 
           applicant.investments && 
           applicant.location;
  },

  // Get spending total for an applicant
  getSpendingTotal: function(applicant) {
    if (!applicant.spending || !applicant.spending.monthlyCategories) return 0;
    
    return Object.values(applicant.spending.monthlyCategories).reduce((total, amount) => {
      return total + (typeof amount === 'number' ? amount : 0);
    }, 0);
  },

  // Get investment total for an applicant
  getInvestmentTotal: function(applicant) {
    if (!applicant.investments || !applicant.investments.portfolio) return 0;
    
    return Object.values(applicant.investments.portfolio).reduce((total, amount) => {
      return total + (typeof amount === 'number' ? amount : 0);
    }, 0);
  },

  // Format currency for display
  formatCurrency: function(amount) {
    if (typeof amount !== 'number' || amount === 0) return '₹0';
    
    if (amount >= 10000000) {
      return '₹' + (amount / 10000000).toFixed(1) + 'Cr';
    } else if (amount >= 100000) {
      return '₹' + (amount / 100000).toFixed(1) + 'L';
    } else if (amount >= 1000) {
      return '₹' + (amount / 1000).toFixed(1) + 'K';
    } else {
      return '₹' + amount.toLocaleString('en-IN');
    }
  },

  // Get risk color class based on category
  getRiskColorClass: function(riskCategory) {
    switch(riskCategory) {
      case 'Low': return 'risk-low';
      case 'Medium': return 'risk-medium';
      case 'High': return 'risk-high';
      default: return 'text-gray-400';
    }
  }
};

// Backward compatibility wrapper - maintains existing global access
window.DataValidator = DataValidator;

// Enhanced applicant data getter with validation
function getValidatedApplicantData(applicantId) {
  return DataValidator.getApplicant(applicantId);
}

// Enhanced applicants list getter with validation
function getAllValidatedApplicants() {
  return DataValidator.getAllApplicants();
}